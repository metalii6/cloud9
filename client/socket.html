<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Socket.IO</title>
        <script src="/socket.io/socker.io.js"></script>
        
    </head>
    <body>
    
    <input type="button" value="VERSION" id="version">
    
    <script type="text/javascript" charset="utf-8">
        
        io.setPath('vendor/socket.io/');

        var socket = new io.Socket(null, {port: 3000});
        socket.connect();
        socket.on("message", function(data){
            var obj = JSON.parse(data);
            console.log("MSG:", obj);
        });
        
        socket.on("connect", function(){
            console.log("connect");
            document.getElementById("version").onclick = function() {
                socket.send('{"seq":69,"type":"request","command":"version"}');
            }
        });
        
    </script>
        
    </body>
</html>