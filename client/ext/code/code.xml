<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:script><![CDATA[
		SupportedModes = {
			"application/javascript": "JavaScript",
			"application/json": "JavaScript",
			"text/css": "Css",
			"text/html": "Html",
			"application/xhtml+xml": "Html",
			"application/xml": "Xml"
		}

		function getSyntax(type) {
             var mime = type.split(";")[0];
             return (SupportedModes[mime] || "Text");
		}

     ]]></a:script>
    
    <a:vbox id="barEditor" anchors="0 0 0 0" visible="false">
        <a:codeeditor id="ceEditor"
          flex   = "1" 
          value  = "[data]"
          syntax = "{getSyntax([@contenttype])}"
          contextmenu    = "mnuCtxEditor"
          showinvisibles = "false"
          debugger       = "{stDebugProcessRunning.active and [@scriptid] ? dbg : null}"
          readonly       = "{stDebugProcessRunning.active and [@scriptid]}"
        />
    </a:vbox>
    
    <a:menu id="mnuCtxEditor" render="runtime">
        <a:item>Undo</a:item>
        <a:item>Redo</a:item>
        <a:divider />
        <a:item>Cut</a:item>
        <a:item>Copy</a:item>
        <a:item>Paste</a:item>
        <a:divider />
        <a:item>Select All</a:item>
    </a:menu>
    
    <a:menu id="mnuSyntax" onitemclick="alert('@fabian, how should this be implemented?');">
        <a:item value="text/plain">Plain Text</a:item>
        <a:item value="application/javascript">JavaScript</a:item>
    </a:menu>
</a:application>